<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAGé¡¹ç›®æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', 'å¾®è½¯é›…é»‘', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: #fff;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.8em;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        h2 {
            color: #34495e;
            margin-top: 50px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
            font-size: 2em;
            display: flex;
            align-items: center;
        }

        h2 svg {
            width: 32px;
            height: 32px;
            margin-right: 15px;
            fill: #667eea;
        }

        h3 {
            color: #2980b9;
            margin-top: 35px;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        h4 {
            color: #16a085;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        p {
            margin-bottom: 15px;
            text-align: justify;
        }

        ul, ol {
            margin-left: 35px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 10px;
        }

        .mermaid {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
            border: 2px solid #e9ecef;
        }

        .priority-high {
            background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
            border-left: 5px solid #e74c3c;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(231, 76, 60, 0.2);
        }

        .priority-medium {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
            border-left: 5px solid #f39c12;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(243, 156, 18, 0.2);
        }

        .priority-low {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-left: 5px solid #27ae60;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(39, 174, 96, 0.2);
        }

        .problem-box {
            background: linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
            border: 2px solid #e91e63;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(233, 30, 99, 0.2);
        }

        .solution-box {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border: 2px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(33, 150, 243, 0.2);
        }

        .code-block {
            background: #282c34;
            border: 2px solid #3e4451;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #abb2bf;
        }

        .code-block pre {
            margin: 0;
        }

        .table-container {
            overflow-x: auto;
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: left;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
            font-size: 0.9em;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        tr:hover {
            background-color: #e9ecef;
        }

        .toc {
            background: linear-gradient(135deg, #ecf0f1 0%, #bdc3c7 100%);
            padding: 25px;
            margin: 25px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .toc h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .toc ul {
            list-style-type: none;
            margin-left: 0;
        }

        .toc li {
            margin-bottom: 12px;
        }

        .toc a {
            color: #2980b9;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #667eea;
            text-decoration: underline;
        }

        .metric {
            display: inline-block;
            background-color: #95a5a6;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            margin-right: 10px;
            font-weight: bold;
        }

        .metric-high {
            background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        }

        .metric-medium {
            background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%);
        }

        .metric-low {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
        }

        .warning {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 2px solid #ffc107;
            color: #856404;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(255, 193, 7, 0.3);
        }

        .info {
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
            border: 2px solid #17a2b8;
            color: #0c5460;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(23, 162, 184, 0.3);
        }

        .footer {
            margin-top: 60px;
            padding-top: 30px;
            border-top: 3px solid #667eea;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9em;
        }

        .bottleneck-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .bottleneck-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        .bottleneck-card h4 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.4em;
        }

        .icon-box {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .icon-box svg {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            fill: #667eea;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .stat-card h3 {
            color: white;
            margin-top: 0;
            font-size: 2.5em;
        }

        .stat-card p {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 0;
        }

        .timeline {
            position: relative;
            padding: 20px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: #667eea;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .timeline-item:nth-child(odd) {
            margin-right: 50%;
            text-align: right;
        }

        .timeline-item:nth-child(even) {
            margin-left: 50%;
            text-align: left;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            top: 50%;
            width: 20px;
            height: 20px;
            background: #667eea;
            border-radius: 50%;
            transform: translateY(-50%);
        }

        .timeline-item:nth-child(odd)::before {
            right: -12px;
        }

        .timeline-item:nth-child(even)::before {
            left: -12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>RAGé¡¹ç›®æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ</h1>
        <p style="text-align: center; color: #7f8c8d; margin-bottom: 30px; font-size: 1.1em;">ä¼ä¸šçŸ¥è¯†åº“ç³»ç»Ÿæ€§èƒ½åˆ†æä¸ä¼˜åŒ–å»ºè®®</p>

        <div class="stats-grid">
            <div class="stat-card">
                <h3>7</h3>
                <p>ä¸»è¦æ€§èƒ½ç“¶é¢ˆ</p>
            </div>
            <div class="stat-card">
                <h3>20+</h3>
                <p>ä¼˜åŒ–æ–¹æ¡ˆ</p>
            </div>
            <div class="stat-card">
                <h3>5-10x</h3>
                <p>é¢„æœŸæ€§èƒ½æå‡</p>
            </div>
            <div class="stat-card">
                <h3>4å‘¨</h3>
                <p>é¢„è®¡å®æ–½å‘¨æœŸ</p>
            </div>
        </div>

        <div class="toc">
            <h3>ğŸ“‹ ç›®å½•</h3>
            <ul>
                <li><a href="#section-1">1. é¡¹ç›®æ¦‚è¿°</a></li>
                <li><a href="#section-2">2. æ€§èƒ½ç“¶é¢ˆåˆ†æ</a></li>
                <li><a href="#section-3">3. è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ</a></li>
                <li><a href="#section-4">4. ä¼˜åŒ–ä¼˜å…ˆçº§å»ºè®®</a></li>
                <li><a href="#section-5">5. å®æ–½å»ºè®®</a></li>
            </ul>
        </div>

        <h2 id="section-1">
            <svg viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            1. é¡¹ç›®æ¦‚è¿°
        </h2>
        <p>æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰æŠ€æœ¯çš„ä¼ä¸šçŸ¥è¯†åº“ç³»ç»Ÿï¼Œä¸»è¦ç”¨äºå¤„ç†å’ŒæŸ¥è¯¢PDFæ ¼å¼çš„è´¢åŠ¡æŠ¥å‘Šå’Œè¡Œä¸šç ”ç©¶æŠ¥å‘Šã€‚ç³»ç»Ÿé€šè¿‡å‘é‡æ£€ç´¢ã€BM25æ£€ç´¢å’ŒLLMé‡æ’åºç­‰æŠ€æœ¯ï¼Œä¸ºç”¨æˆ·æä¾›ç²¾å‡†çš„æ–‡æ¡£æ£€ç´¢å’Œé—®ç­”æœåŠ¡ã€‚</p>

        <div class="mermaid">
graph TD
    A[ç”¨æˆ·æŸ¥è¯¢] --> B[å‘é‡æ£€ç´¢]
    A --> C[BM25æ£€ç´¢]
    B --> D[æ··åˆæ£€ç´¢]
    C --> D
    D --> E[LLMé‡æ’åº]
    E --> F[ç­”æ¡ˆç”Ÿæˆ]
    F --> G[PDFé«˜äº®æ˜¾ç¤º]
    
    style A fill:#667eea
    style B fill:#764ba2
    style C fill:#764ba2
    style D fill:#f39c12
    style E fill:#e74c3c
    style F fill:#27ae60
    style G fill:#16a085
        </div>

        <div class="table-container">
            <table>
                <tr>
                    <th>æŠ€æœ¯ç»„ä»¶</th>
                    <th>æŠ€æœ¯æ ˆ</th>
                    <th>ä¸»è¦åŠŸèƒ½</th>
                </tr>
                <tr>
                    <td>å‘é‡æ£€ç´¢</td>
                    <td>FAISS</td>
                    <td>åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„æ–‡æ¡£æ£€ç´¢</td>
                </tr>
                <tr>
                    <td>ä¼ ç»Ÿæ£€ç´¢</td>
                    <td>BM25</td>
                    <td>åŸºäºå…³é”®è¯åŒ¹é…çš„æ–‡æ¡£æ£€ç´¢</td>
                </tr>
                <tr>
                    <td>é‡æ’åº</td>
                    <td>LLM (DashScope)</td>
                    <td>å¯¹æ£€ç´¢ç»“æœè¿›è¡Œç²¾å‡†é‡æ’</td>
                </tr>
                <tr>
                    <td>Webç•Œé¢</td>
                    <td>Streamlit</td>
                    <td>ç”¨æˆ·äº¤äº’ç•Œé¢</td>
                </tr>
                <tr>
                    <td>PDFå¤„ç†</td>
                    <td>PyMuPDF, MinerU</td>
                    <td>PDFè§£æå’Œå¯è§†åŒ–</td>
                </tr>
            </table>
        </div>

        <div class="warning">
            <strong>âš ï¸ å½“å‰é—®é¢˜ï¼š</strong>Webç•Œé¢å¯åŠ¨é€Ÿåº¦æ…¢ï¼Œç”¨æˆ·æŸ¥è¯¢å“åº”æ—¶é—´è¿‡é•¿ï¼Œä¸¥é‡å½±å“ç”¨æˆ·ä½“éªŒã€‚
        </div>

        <h2 id="section-2">
            <svg viewBox="0 0 24 24">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 14h-2v-4H6v-2h4V7h2v4h4v2h-4v4z"/>
            </svg>
            2. æ€§èƒ½ç“¶é¢ˆåˆ†æ
        </h2>

        <div class="mermaid">
graph LR
    A[æ€§èƒ½ç“¶é¢ˆ] --> B[LLMé‡æ’åº]
    A --> C[å‘é‡æ£€ç´¢]
    A --> D[APIè°ƒç”¨]
    A --> E[PDFå¤„ç†]
    A --> F[Webå¯åŠ¨]
    A --> G[æ··åˆæ£€ç´¢]
    A --> H[æ–‡ä»¶I/O]
    
    B --> B1[ä¸²è¡Œå¤„ç†]
    B --> B2[å¤šæ¬¡APIè°ƒç”¨]
    B --> B3[ç½‘ç»œå»¶è¿Ÿç´¯ç§¯]
    
    style A fill:#e74c3c
    style B fill:#c0392b
    style C fill:#e67e22
    style D fill:#f39c12
    style E fill:#27ae60
    style F fill:#16a085
    style G fill:#2980b9
    style H fill:#8e44ad
        </div>

        <h3>2.1 LLMé‡æ’åºè¿‡ç¨‹ï¼ˆæœ€ä¸¥é‡çš„ç“¶é¢ˆï¼‰</h3>
        <div class="bottleneck-card">
            <h4>ğŸ”´ é—®é¢˜æè¿°ï¼š</h4>
            <ul>
                <li>åœ¨ <code>reranking.py</code> ä¸­ä½¿ç”¨ <code>ThreadPoolExecutor(max_workers=1)</code>ï¼Œå¯¼è‡´æ‰€æœ‰LLMè°ƒç”¨ä¸²è¡Œæ‰§è¡Œ</li>
                <li>æ¯ä¸ªæ–‡æ¡£éƒ½éœ€è¦å•ç‹¬è°ƒç”¨LLM APIï¼Œ28ä¸ªæ–‡æ¡£éœ€è¦28æ¬¡APIè°ƒç”¨</li>
                <li>æ¯æ¬¡APIè°ƒç”¨éƒ½æœ‰ç½‘ç»œå»¶è¿Ÿï¼ˆé€šå¸¸500ms-2sï¼‰ï¼Œç´¯ç§¯åéå¸¸è€—æ—¶</li>
                <li>é»˜è®¤é…ç½®ä¸‹ï¼Œå•æ¬¡æŸ¥è¯¢çš„LLMé‡æ’åºå¯èƒ½éœ€è¦14-56ç§’</li>
            </ul>
        </div>

        <div class="code-block">
<pre>with ThreadPoolExecutor(max_workers=1) as executor:
    all_results = list(executor.map(process_single_doc, documents))</pre>
        </div>

        <h3>2.2 å‘é‡æ£€ç´¢è¿‡ç¨‹</h3>
        <div class="bottleneck-card">
            <h4>ğŸŸ  é—®é¢˜æè¿°ï¼š</h4>
            <ul>
                <li>é¦–æ¬¡å‘é‡æ£€ç´¢è¿”å›28ä¸ªå€™é€‰æ–‡æ¡£ï¼ˆ<code>llm_reranking_sample_size=28</code>ï¼‰</li>
                <li>FAISSç´¢å¼•ä½¿ç”¨ <code>IndexFlatL2</code>ï¼Œåœ¨å¤§è§„æ¨¡æ•°æ®ä¸‹æ£€ç´¢æ•ˆç‡è¾ƒä½</li>
                <li>æ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦åŠ è½½å‘é‡ç´¢å¼•ï¼Œæ²¡æœ‰é¢„åŠ è½½æœºåˆ¶</li>
                <li>å‘é‡æ£€ç´¢æ—¶é—´éšæ–‡æ¡£æ•°é‡çº¿æ€§å¢é•¿</li>
            </ul>
        </div>

        <h3>2.3 APIè°ƒç”¨ä¼˜åŒ–</h3>
        <div class="bottleneck-card">
            <h4>ğŸŸ¡ é—®é¢˜æè¿°ï¼š</h4>
            <ul>
                <li>æ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦è°ƒç”¨LLM APIç”Ÿæˆç­”æ¡ˆ</li>
                <li>æ²¡æœ‰ç¼“å­˜æœºåˆ¶ï¼Œç›¸åŒé—®é¢˜é‡å¤è°ƒç”¨API</li>
                <li>APIè°ƒç”¨å¯èƒ½å­˜åœ¨ç½‘ç»œå»¶è¿Ÿå’ŒQPSé™åˆ¶</li>
                <li>åŒæ­¥è°ƒç”¨æ–¹å¼é˜»å¡äº†åç»­å¤„ç†</li>
            </ul>
        </div>

        <h3>2.4 PDFå¤„ç†å’ŒBboxè®¡ç®—</h3>
        <div class="bottleneck-card">
            <h4>ğŸŸ¢ é—®é¢˜æè¿°ï¼š</h4>
            <ul>
                <li>æ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦è¯»å–PDFæ–‡ä»¶</li>
                <li>Bboxè®¡ç®—å’ŒåŒ¹é…ç®—æ³•å¤æ‚ï¼Œæ¶‰åŠå¤šæ¬¡å¾ªç¯å’Œè®¡ç®—</li>
                <li>PDFé¡µé¢æ¸²æŸ“ä¸ºå›¾ç‰‡éœ€è¦æ—¶é—´ï¼ˆæ¯é¡µçº¦100-500msï¼‰</li>
                <li>æ²¡æœ‰ç¼“å­˜æœºåˆ¶ï¼Œé‡å¤æ¸²æŸ“ç›¸åŒé¡µé¢</li>
            </ul>
        </div>

        <h3>2.5 Webç•Œé¢å¯åŠ¨ä¼˜åŒ–</h3>
        <div class="bottleneck-card">
            <h4>ğŸ”µ é—®é¢˜æè¿°ï¼š</h4>
            <ul>
                <li>Streamlitåº”ç”¨å¯åŠ¨æ—¶éœ€è¦åŠ è½½æ‰€æœ‰ä¾èµ–</li>
                <li>éœ€è¦åœ¨å¯åŠ¨æ—¶åˆå§‹åŒ–å¤šä¸ªç»„ä»¶ï¼ˆå‘é‡ç´¢å¼•ã€BM25ç´¢å¼•ç­‰ï¼‰</li>
                <li>æ²¡æœ‰æ˜æ˜¾çš„å¯åŠ¨ä¼˜åŒ–ä»£ç </li>
                <li>é¦–æ¬¡æŸ¥è¯¢æ—¶éœ€è¦åŠ è½½å¤§é‡èµ„æº</li>
            </ul>
        </div>

        <h3>2.6 æ··åˆæ£€ç´¢ä¼˜åŒ–</h3>
        <div class="bottleneck-card">
            <h4>ğŸŸ£ é—®é¢˜æè¿°ï¼š</h4>
            <ul>
                <li>åŒæ—¶è¿›è¡Œå‘é‡æ£€ç´¢å’ŒBM25æ£€ç´¢ï¼Œä½†ä¸²è¡Œæ‰§è¡Œ</li>
                <li>éœ€è¦åˆå¹¶å’Œé‡æ’ä¸¤ç§æ£€ç´¢ç»“æœ</li>
                <li>BM25æ£€ç´¢å¯èƒ½æ²¡æœ‰ä¼˜åŒ–ï¼Œæ¯æ¬¡éƒ½éœ€è¦é‡æ–°è®¡ç®—</li>
                <li>æƒé‡é…ç½®å¯èƒ½ä¸å¤Ÿä¼˜åŒ–</li>
            </ul>
        </div>

        <h3>2.7 æ–‡ä»¶I/Oä¼˜åŒ–</h3>
        <div class="bottleneck-card">
            <h4>ğŸŸ¤ é—®é¢˜æè¿°ï¼š</h4>
            <ul>
                <li>æ¯æ¬¡æŸ¥è¯¢éƒ½éœ€è¦è¯»å–å¤šä¸ªæ–‡ä»¶ï¼ˆPDFã€å‘é‡ç´¢å¼•ã€é…ç½®ç­‰ï¼‰</li>
                <li>æ²¡æœ‰æ–‡ä»¶ç¼“å­˜æœºåˆ¶</li>
                <li>å¯èƒ½å­˜åœ¨é‡å¤çš„æ–‡ä»¶è¯»å–</li>
                <li>æ–‡ä»¶è¯»å–æ“ä½œåŒæ­¥æ‰§è¡Œï¼Œé˜»å¡åç»­å¤„ç†</li>
            </ul>
        </div>

        <h2 id="section-3">
            <svg viewBox="0 0 24 24">
                <path d="M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
            </svg>
            3. è¯¦ç»†ä¼˜åŒ–æ–¹æ¡ˆ
        </h2>

        <div class="mermaid">
graph TD
    A[ä¼˜åŒ–æ–¹æ¡ˆ] --> B[LLMé‡æ’åº]
    A --> C[å‘é‡æ£€ç´¢]
    A --> D[APIè°ƒç”¨]
    A --> E[PDFå¤„ç†]
    A --> F[Webå¯åŠ¨]
    A --> G[æ··åˆæ£€ç´¢]
    A --> H[æ–‡ä»¶I/O]
    
    B --> B1[æ‰¹é‡å¤„ç†]
    B --> B2[å¢åŠ å¹¶å‘]
    B --> B3[ç¼“å­˜æœºåˆ¶]
    
    C --> C1[ä¼˜åŒ–ç´¢å¼•]
    C --> C2[é¢„åŠ è½½]
    C --> C3[GPUåŠ é€Ÿ]
    
    D --> D1[æŸ¥è¯¢ç¼“å­˜]
    D --> D2[å¼‚æ­¥è°ƒç”¨]
    D --> D3[è¿æ¥æ± ]
    
    style A fill:#667eea
    style B fill:#764ba2
    style C fill:#f39c12
    style D fill:#e74c3c
    style E fill:#27ae60
    style F fill:#16a085
    style G fill:#2980b9
    style H fill:#8e44ad
        </div>

        <h3>3.1 LLMé‡æ’åºä¼˜åŒ–</h3>
        <div class="solution-box">
            <h4>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼š</h4>
            <ol>
                <li><strong>æ‰¹é‡é‡æ’åº</strong>ï¼šå°†å¤šä¸ªæ–‡æ¡£åˆå¹¶ä¸ºä¸€æ¬¡LLMè°ƒç”¨ï¼Œè®©LLMä¸€æ¬¡æ€§å¯¹æ‰€æœ‰æ–‡æ¡£è¯„åˆ†
                    <div class="code-block">
<pre>def batch_rerank_documents(self, query: str, documents: List[Dict], batch_size: int = 10):
    """æ‰¹é‡é‡æ’åºæ–‡æ¡£"""
    all_scores = []
    for i in range(0, len(documents), batch_size):
        batch = documents[i:i + batch_size]
        prompt = self._create_batch_rerank_prompt(query, batch)
        scores = self._call_llm_batch(prompt)
        all_scores.extend(scores)
    return self._combine_scores(documents, all_scores)</pre>
                    </div>
                </li>
                <li><strong>å¢åŠ å¹¶å‘åº¦</strong>ï¼šå¦‚æœAPIçš„QPSé™åˆ¶å…è®¸ï¼Œå¯ä»¥å¢åŠ  <code>max_workers</code> çš„å€¼
                    <div class="code-block">
<pre>with ThreadPoolExecutor(max_workers=3) as executor:
    all_results = list(executor.map(process_single_doc, documents))</pre>
                    </div>
                </li>
                <li><strong>ç¼“å­˜æœºåˆ¶</strong>ï¼šå¯¹ç›¸åŒqueryçš„rerankingç»“æœè¿›è¡Œç¼“å­˜
                    <div class="code-block">
<pre>from functools import lru_cache

@lru_cache(maxsize=100)
def _get_cached_reranking(self, query_hash: str, doc_ids: tuple):
    """ç¼“å­˜é‡æ’åºç»“æœ"""
    return self._perform_reranking(query_hash, doc_ids)</pre>
                    </div>
                </li>
                <li><strong>å‡å°‘é‡æ’åºæ ·æœ¬é‡</strong>ï¼šå°† <code>llm_reranking_sample_size</code> ä»28é™ä½åˆ°15-20</li>
                <li><strong>ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹</strong>ï¼šè€ƒè™‘ä½¿ç”¨æ›´è½»é‡çº§çš„æ¨¡å‹è¿›è¡Œreranking</li>
            </ol>
            <h4>ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š</h4>
            <ul>
                <li>æ‰¹é‡å¤„ç†å¯å‡å°‘APIè°ƒç”¨æ¬¡æ•°70-80%</li>
                <li>å¢åŠ å¹¶å‘åº¦å¯æå‡å¤„ç†é€Ÿåº¦2-3å€</li>
                <li>ç¼“å­˜æœºåˆ¶å¯å‡å°‘é‡å¤æŸ¥è¯¢æ—¶é—´90%ä»¥ä¸Š</li>
                <li>æ€»ä½“å¯æå‡é‡æ’åºé€Ÿåº¦5-10å€</li>
            </ul>
        </div>

        <h3>3.2 å‘é‡æ£€ç´¢ä¼˜åŒ–</h3>
        <div class="solution-box">
            <h4>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼š</h4>
            <ol>
                <li><strong>ä¼˜åŒ–FAISSç´¢å¼•</strong>ï¼šä½¿ç”¨ <code>IndexIVFFlat</code> æˆ– <code>IndexIVFPQ</code> æ›¿ä»£ <code>IndexFlatL2</code>
                    <div class="code-block">
<pre>import faiss

# ä½¿ç”¨IVFç´¢å¼•
quantizer = faiss.IndexFlatL2(dimension)
index = faiss.IndexIVFFlat(quantizer, dimension, nlist)
index.train(vectors)
index.add(vectors)</pre>
                    </div>
                </li>
                <li><strong>ç´¢å¼•é¢„åŠ è½½</strong>ï¼šåœ¨Webå¯åŠ¨æ—¶é¢„å…ˆåŠ è½½æ‰€æœ‰å…¬å¸çš„FAISSç´¢å¼•
                    <div class="code-block">
<pre>@st.cache_resource
def load_all_vector_indexes():
    """é¢„åŠ è½½æ‰€æœ‰å‘é‡ç´¢å¼•"""
    indexes = {}
    for company_name in company_names:
        indexes[company_name] = load_vector_index(company_name)
    return indexes</pre>
                    </div>
                </li>
                <li><strong>å‡å°‘åˆå§‹æ£€ç´¢æ•°é‡</strong>ï¼šå°† <code>llm_reranking_sample_size</code> é™ä½åˆ°15-20</li>
                <li><strong>ä½¿ç”¨GPUåŠ é€Ÿ</strong>ï¼šå¦‚æœå¯ç”¨ï¼Œä½¿ç”¨GPUåŠ é€ŸFAISSæ£€ç´¢
                    <div class="code-block">
<pre>res = faiss.StandardGpuResources()
gpu_index = faiss.index_cpu_to_gpu(res, 0, index)</pre>
                    </div>
                </li>
            </ol>
            <h4>ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š</h4>
            <ul>
                <li>IVFç´¢å¼•å¯æå‡æ£€ç´¢é€Ÿåº¦3-5å€</li>
                <li>é¢„åŠ è½½å¯å‡å°‘é¦–æ¬¡æŸ¥è¯¢å»¶è¿Ÿ50-70%</li>
                <li>GPUåŠ é€Ÿå¯è¿›ä¸€æ­¥æå‡é€Ÿåº¦2-3å€</li>
                <li>æ€»ä½“å¯æå‡æ£€ç´¢é€Ÿåº¦5-10å€</li>
            </ul>
        </div>

        <h3>3.3 APIè°ƒç”¨ä¼˜åŒ–</h3>
        <div class="solution-box">
            <h4>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼š</h4>
            <ol>
                <li><strong>å®ç°æŸ¥è¯¢ç¼“å­˜</strong>ï¼šä½¿ç”¨Redisæˆ–å†…å­˜ç¼“å­˜å­˜å‚¨query-answerå¯¹
                    <div class="code-block">
<pre>import hashlib

def get_cache_key(query: str, company_name: str) -> str:
    """ç”Ÿæˆç¼“å­˜é”®"""
    content = f"{query}_{company_name}"
    return hashlib.md5(content.encode()).hexdigest()

@st.cache_data(ttl=3600)
def cached_query(query: str, company_name: str):
    """ç¼“å­˜æŸ¥è¯¢ç»“æœ"""
    return perform_query(query, company_name)</pre>
                    </div>
                </li>
                <li><strong>å¼‚æ­¥APIè°ƒç”¨</strong>ï¼šä½¿ç”¨å¼‚æ­¥IOè¿›è¡ŒAPIè°ƒç”¨ï¼Œæé«˜å¹¶å‘æ€§èƒ½
                    <div class="code-block">
<pre>import asyncio
import aiohttp

async def async_llm_call(prompt: str):
    """å¼‚æ­¥LLMè°ƒç”¨"""
    async with aiohttp.ClientSession() as session:
        async with session.post(api_url, json={"prompt": prompt}) as response:
            return await response.json()</pre>
                    </div>
                </li>
                <li><strong>è¿æ¥æ± </strong>ï¼šä½¿ç”¨HTTPè¿æ¥æ± å‡å°‘è¿æ¥å»ºç«‹å¼€é”€
                    <div class="code-block">
<pre>import requests
from requests.adapters import HTTPAdapter
from urllib3.util.retry import Retry

session = requests.Session()
retry = Retry(total=3, backoff_factor=1)
adapter = HTTPAdapter(max_retries=retry, pool_connections=10, pool_maxsize=10)
session.mount('http://', adapter)
session.mount('https://', adapter)</pre>
                    </div>
                </li>
                <li><strong>æ‰¹é‡å¤„ç†</strong>ï¼šå¦‚æœå¯èƒ½ï¼Œå°†å¤šä¸ªqueryåˆå¹¶ä¸ºä¸€æ¬¡APIè°ƒç”¨</li>
            </ol>
            <h4>ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š</h4>
            <ul>
                <li>ç¼“å­˜å¯å‡å°‘é‡å¤æŸ¥è¯¢æ—¶é—´90%ä»¥ä¸Š</li>
                <li>å¼‚æ­¥è°ƒç”¨å¯æå‡å¹¶å‘æ€§èƒ½2-3å€</li>
                <li>è¿æ¥æ± å¯å‡å°‘è¿æ¥å»ºç«‹æ—¶é—´30-50%</li>
                <li>æ€»ä½“å¯æå‡APIè°ƒç”¨æ•ˆç‡3-5å€</li>
            </ul>
        </div>

        <h3>3.4 PDFå¤„ç†å’ŒBboxè®¡ç®—ä¼˜åŒ–</h3>
        <div class="solution-box">
            <h4>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼š</h4>
            <ol>
                <li><strong>PDFé¡µé¢ç¼“å­˜</strong>ï¼šå°†PDFé¡µé¢æ¸²æŸ“ä¸ºå›¾ç‰‡å¹¶ç¼“å­˜ï¼Œé¿å…é‡å¤æ¸²æŸ“
                    <div class="code-block">
<pre>@st.cache_data(ttl=86400)
def render_pdf_page(pdf_path: str, page_num: int):
    """ç¼“å­˜PDFé¡µé¢æ¸²æŸ“"""
    doc = fitz.open(pdf_path)
    page = doc[page_num]
    pix = page.get_pixmap()
    img_data = pix.tobytes("png")
    doc.close()
    return img_data</pre>
                    </div>
                </li>
                <li><strong>ä¼˜åŒ–bboxåŒ¹é…ç®—æ³•</strong>ï¼šä½¿ç”¨æ›´é«˜æ•ˆçš„ç®—æ³•æˆ–æ•°æ®ç»“æ„
                    <div class="code-block">
<pre>from sklearn.metrics.pairwise import cosine_similarity
import numpy as np

def fast_bbox_matching(query_embedding, bbox_embeddings, top_k=5):
    """ä½¿ç”¨å‘é‡ç›¸ä¼¼åº¦åŠ é€ŸbboxåŒ¹é…"""
    similarities = cosine_similarity(
        [query_embedding],
        bbox_embeddings
    )[0]
    top_indices = np.argsort(similarities)[-top_k:][::-1]
    return top_indices</pre>
                    </div>
                </li>
                <li><strong>å»¶è¿ŸåŠ è½½</strong>ï¼šåªåœ¨éœ€è¦æ˜¾ç¤ºæ—¶æ‰åŠ è½½å’Œæ¸²æŸ“PDFé¡µé¢</li>
                <li><strong>é¢„è®¡ç®—bboxä¿¡æ¯</strong>ï¼šåœ¨ingestioné˜¶æ®µé¢„è®¡ç®—å¹¶å­˜å‚¨bboxç›¸å…³ä¿¡æ¯</li>
            </ol>
            <h4>ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š</h4>
            <ul>
                <li>PDFé¡µé¢ç¼“å­˜å¯å‡å°‘é‡å¤æ¸²æŸ“æ—¶é—´95%ä»¥ä¸Š</li>
                <li>ä¼˜åŒ–ç®—æ³•å¯æå‡bboxåŒ¹é…é€Ÿåº¦2-5å€</li>
                <li>å»¶è¿ŸåŠ è½½å¯å‡å°‘åˆå§‹åŠ è½½æ—¶é—´50-70%</li>
                <li>æ€»ä½“å¯æå‡PDFå¤„ç†æ•ˆç‡5-10å€</li>
            </ul>
        </div>

        <h3>3.5 Webç•Œé¢å¯åŠ¨ä¼˜åŒ–</h3>
        <div class="solution-box">
            <h4>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼š</h4>
            <ol>
                <li><strong>æ‡’åŠ è½½</strong>ï¼šå»¶è¿ŸåŠ è½½éå…³é”®ç»„ä»¶
                    <div class="code-block">
<pre>@st.cache_resource
def get_retriever():
    """å»¶è¿ŸåŠ è½½æ£€ç´¢å™¨"""
    return HybridRetriever()

# åœ¨éœ€è¦æ—¶æ‰è°ƒç”¨
if st.button("æŸ¥è¯¢"):
    retriever = get_retriever()
    results = retriever.retrieve(...)</pre>
                    </div>
                </li>
                <li><strong>ç¼“å­˜åˆå§‹åŒ–</strong>ï¼šç¼“å­˜åˆå§‹åŒ–ç»“æœï¼Œé¿å…é‡å¤è®¡ç®—
                    <div class="code-block">
<pre>@st.cache_resource
def initialize_system():
    """ç¼“å­˜ç³»ç»Ÿåˆå§‹åŒ–"""
    vector_indexes = load_all_vector_indexes()
    bm25_index = load_bm25_index()
    return {
        'vector_indexes': vector_indexes,
        'bm25_index': bm25_index
    }</pre>
                    </div>
                </li>
                <li><strong>å‡å°‘ä¾èµ–</strong>ï¼šæ£€æŸ¥å¹¶ç§»é™¤ä¸å¿…è¦çš„ä¾èµ–</li>
                <li><strong>ä½¿ç”¨ç¼“å­˜è£…é¥°å™¨</strong>ï¼šå¯¹è®¡ç®—å¯†é›†å‹å‡½æ•°ä½¿ç”¨ <code>@st.cache_data</code></li>
            </ol>
            <h4>ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š</h4>
            <ul>
                <li>æ‡’åŠ è½½å¯å‡å°‘å¯åŠ¨æ—¶é—´30-50%</li>
                <li>ç¼“å­˜åˆå§‹åŒ–å¯å‡å°‘é‡å¤åˆå§‹åŒ–æ—¶é—´80%ä»¥ä¸Š</li>
                <li>å‡å°‘ä¾èµ–å¯åŠ å¿«å¯åŠ¨é€Ÿåº¦10-20%</li>
                <li>æ€»ä½“å¯æå‡å¯åŠ¨é€Ÿåº¦2-3å€</li>
            </ul>
        </div>

        <h3>3.6 æ··åˆæ£€ç´¢ä¼˜åŒ–</h3>
        <div class="solution-box">
            <h4>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼š</h4>
            <ol>
                <li><strong>BM25ç´¢å¼•ç¼“å­˜</strong>ï¼šé¢„åŠ è½½å¹¶ç¼“å­˜BM25ç´¢å¼•
                    <div class="code-block">
<pre>@st.cache_resource
def load_bm25_index(company_name: str):
    """ç¼“å­˜BM25ç´¢å¼•"""
    return BM25Retriever(company_name)</pre>
                    </div>
                </li>
                <li><strong>å¹¶è¡Œæ£€ç´¢</strong>ï¼šåŒæ—¶è¿›è¡Œå‘é‡æ£€ç´¢å’ŒBM25æ£€ç´¢
                    <div class="code-block">
<pre>from concurrent.futures import ThreadPoolExecutor

def parallel_retrieve(query: str, company_name: str):
    """å¹¶è¡Œæ£€ç´¢"""
    with ThreadPoolExecutor(max_workers=2) as executor:
        future_vector = executor.submit(
            vector_retriever.retrieve, query, company_name
        )
        future_bm25 = executor.submit(
            bm25_retriever.retrieve, query, company_name
        )
        vector_results = future_vector.result()
        bm25_results = future_bm25.result()
    return merge_results(vector_results, bm25_results)</pre>
                    </div>
                </li>
                <li><strong>ä¼˜åŒ–æƒé‡é…ç½®</strong>ï¼šè°ƒæ•´ <code>llm_weight</code> å’Œå…¶ä»–æƒé‡å‚æ•°</li>
                <li><strong>é€‰æ‹©æ€§ä½¿ç”¨BM25</strong>ï¼šæ ¹æ®queryç±»å‹å†³å®šæ˜¯å¦ä½¿ç”¨BM25</li>
            </ol>
            <h4>ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š</h4>
            <ul>
                <li>BM25ç´¢å¼•ç¼“å­˜å¯å‡å°‘åŠ è½½æ—¶é—´80%ä»¥ä¸Š</li>
                <li>å¹¶è¡Œæ£€ç´¢å¯æå‡æ£€ç´¢é€Ÿåº¦1.5-2å€</li>
                <li>ä¼˜åŒ–æƒé‡å¯æå‡æ£€ç´¢å‡†ç¡®ç‡10-20%</li>
                <li>æ€»ä½“å¯æå‡æ··åˆæ£€ç´¢æ•ˆç‡2-3å€</li>
            </ul>
        </div>

        <h3>3.7 æ–‡ä»¶I/Oä¼˜åŒ–</h3>
        <div class="solution-box">
            <h4>ğŸš€ ä¼˜åŒ–æ–¹æ¡ˆï¼š</h4>
            <ol>
                <li><strong>å†…å­˜ç¼“å­˜</strong>ï¼šå°†é¢‘ç¹è®¿é—®çš„æ–‡ä»¶å†…å®¹ç¼“å­˜åœ¨å†…å­˜ä¸­
                    <div class="code-block">
<pre>from functools import lru_cache

@lru_cache(maxsize=100)
def read_file_cached(file_path: str):
    """ç¼“å­˜æ–‡ä»¶è¯»å–"""
    with open(file_path, 'r', encoding='utf-8') as f:
        return f.read()</pre>
                    </div>
                </li>
                <li><strong>é¢„åŠ è½½</strong>ï¼šåœ¨åº”ç”¨å¯åŠ¨æ—¶é¢„åŠ è½½å…³é”®æ–‡ä»¶
                    <div class="code-block">
<pre>@st.cache_resource
def preload_key_files():
    """é¢„åŠ è½½å…³é”®æ–‡ä»¶"""
    files = {}
    for file_path in key_file_paths:
        files[file_path] = read_file_cached(file_path)
    return files</pre>
                    </div>
                </li>
                <li><strong>ä½¿ç”¨æ›´å¿«çš„å­˜å‚¨</strong>ï¼šå¦‚æœå¯èƒ½ï¼Œä½¿ç”¨SSDå­˜å‚¨</li>
                <li><strong>æ‰¹é‡è¯»å–</strong>ï¼šåˆå¹¶å¤šä¸ªå°æ–‡ä»¶çš„è¯»å–æ“ä½œ</li>
            </ol>
            <h4>ğŸ“ˆ é¢„æœŸæ•ˆæœï¼š</h4>
            <ul>
                <li>å†…å­˜ç¼“å­˜å¯å‡å°‘é‡å¤è¯»å–æ—¶é—´90%ä»¥ä¸Š</li>
                <li>é¢„åŠ è½½å¯å‡å°‘é¦–æ¬¡è®¿é—®å»¶è¿Ÿ50-70%</li>
                <li>SSDå­˜å‚¨å¯æå‡è¯»å–é€Ÿåº¦2-5å€</li>
                <li>æ€»ä½“å¯æå‡æ–‡ä»¶I/Oæ•ˆç‡3-5å€</li>
            </ul>
        </div>

        <h2 id="section-4">
            <svg viewBox="0 0 24 24">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            4. ä¼˜åŒ–ä¼˜å…ˆçº§å»ºè®®
        </h2>

        <div class="mermaid">
graph TD
    A[ä¼˜åŒ–ä¼˜å…ˆçº§] --> B[é«˜ä¼˜å…ˆçº§]
    A --> C[ä¸­ä¼˜å…ˆçº§]
    A --> D[ä½ä¼˜å…ˆçº§]
    
    B --> B1[LLMé‡æ’åº]
    B --> B2[æŸ¥è¯¢ç¼“å­˜]
    B --> B3[å‡å°‘æ ·æœ¬é‡]
    
    C --> C1[FAISSä¼˜åŒ–]
    C --> C2[PDFç¼“å­˜]
    C --> C3[å¼‚æ­¥API]
    C --> C4[Webå¯åŠ¨]
    
    D --> D1[Bboxç®—æ³•]
    D --> D2[GPUåŠ é€Ÿ]
    D --> D3[æ··åˆæ£€ç´¢å¹¶è¡Œ]
    D --> D4[æ–‡ä»¶I/O]
    
    style A fill:#667eea
    style B fill:#e74c3c
    style C fill:#f39c12
    style D fill:#27ae60
        </div>

        <div class="priority-high">
            <h3>ğŸ”´ é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å®æ–½ï¼‰</h3>
            <p><span class="metric metric-high">å½±å“ç¨‹åº¦</span> <span class="metric metric-high">å®æ–½éš¾åº¦</span></p>
            <ol>
                <li><strong>ä¼˜åŒ–LLMé‡æ’åºè¿‡ç¨‹</strong> - æ‰¹é‡å¤„ç†ã€å¢åŠ å¹¶å‘ã€å®ç°ç¼“å­˜
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š5-10å€é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š1-2å‘¨</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä¸­ç­‰</li>
                    </ul>
                </li>
                <li><strong>å®ç°æŸ¥è¯¢ç¼“å­˜æœºåˆ¶</strong> - ä½¿ç”¨Redisæˆ–å†…å­˜ç¼“å­˜
                    <ul>
                        <li>é¢„æœŸæå‡ï¼šé‡å¤æŸ¥è¯¢90%ä»¥ä¸Šæ—¶é—´å‡å°‘</li>
                        <li>å®æ–½æ—¶é—´ï¼š3-5å¤©</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä½</li>
                    </ul>
                </li>
                <li><strong>å‡å°‘åˆå§‹æ£€ç´¢æ ·æœ¬é‡</strong> - å°†llm_reranking_sample_sizeé™ä½åˆ°15-20
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š30-40%é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š1å¤©</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šæä½</li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="priority-medium">
            <h3>ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆçŸ­æœŸå®æ–½ï¼‰</h3>
            <p><span class="metric metric-medium">å½±å“ç¨‹åº¦</span> <span class="metric metric-medium">å®æ–½éš¾åº¦</span></p>
            <ol>
                <li><strong>ä¼˜åŒ–FAISSç´¢å¼•å’Œé¢„åŠ è½½</strong> - ä½¿ç”¨IVFç´¢å¼•ã€é¢„åŠ è½½ç´¢å¼•
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š5-10å€é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š1-2å‘¨</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä¸­ç­‰</li>
                    </ul>
                </li>
                <li><strong>PDFé¡µé¢ç¼“å­˜</strong> - ç¼“å­˜æ¸²æŸ“åçš„PDFé¡µé¢
                    <ul>
                        <li>é¢„æœŸæå‡ï¼šé‡å¤è®¿é—®95%ä»¥ä¸Šæ—¶é—´å‡å°‘</li>
                        <li>å®æ–½æ—¶é—´ï¼š3-5å¤©</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä½</li>
                    </ul>
                </li>
                <li><strong>å¼‚æ­¥APIè°ƒç”¨</strong> - ä½¿ç”¨å¼‚æ­¥IOè¿›è¡ŒAPIè°ƒç”¨
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š2-3å€å¹¶å‘æ€§èƒ½æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š1-2å‘¨</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä¸­ç­‰</li>
                    </ul>
                </li>
                <li><strong>Webç•Œé¢å¯åŠ¨ä¼˜åŒ–</strong> - æ‡’åŠ è½½ã€ç¼“å­˜åˆå§‹åŒ–
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š2-3å€å¯åŠ¨é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š3-5å¤©</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä½</li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="priority-low">
            <h3>ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆé•¿æœŸä¼˜åŒ–ï¼‰</h3>
            <p><span class="metric metric-low">å½±å“ç¨‹åº¦</span> <span class="metric metric-low">å®æ–½éš¾åº¦</span></p>
            <ol>
                <li><strong>ä¼˜åŒ–bboxåŒ¹é…ç®—æ³•</strong> - ä½¿ç”¨æ›´é«˜æ•ˆçš„ç®—æ³•
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š2-5å€é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š2-3å‘¨</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šé«˜</li>
                    </ul>
                </li>
                <li><strong>ä½¿ç”¨GPUåŠ é€Ÿ</strong> - GPUåŠ é€ŸFAISSæ£€ç´¢
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š2-3å€é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š1-2å‘¨</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä¸­ç­‰</li>
                    </ul>
                </li>
                <li><strong>æ··åˆæ£€ç´¢å¹¶è¡ŒåŒ–</strong> - å¹¶è¡Œæ‰§è¡Œå‘é‡æ£€ç´¢å’ŒBM25æ£€ç´¢
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š1.5-2å€é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š3-5å¤©</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä½</li>
                    </ul>
                </li>
                <li><strong>æ–‡ä»¶I/Oä¼˜åŒ–</strong> - å†…å­˜ç¼“å­˜ã€é¢„åŠ è½½
                    <ul>
                        <li>é¢„æœŸæå‡ï¼š3-5å€é€Ÿåº¦æå‡</li>
                        <li>å®æ–½æ—¶é—´ï¼š1å‘¨</li>
                        <li>æŠ€æœ¯éš¾åº¦ï¼šä½</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h2 id="section-5">
            <svg viewBox="0 0 24 24">
                <path d="M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm2 14H7v-2h7v2zm3-4H7v-2h10v2zm0-4H7V7h10v2z"/>
            </svg>
            5. å®æ–½å»ºè®®
        </h2>

        <div class="mermaid">
gantt
    title ä¼˜åŒ–å®æ–½æ—¶é—´çº¿
    dateFormat  YYYY-MM-DD
    section é«˜ä¼˜å…ˆçº§
    LLMé‡æ’åºä¼˜åŒ–       :a1, 2024-01-01, 14d
    æŸ¥è¯¢ç¼“å­˜æœºåˆ¶        :a2, after a1, 5d
    å‡å°‘æ£€ç´¢æ ·æœ¬é‡      :a3, after a2, 1d
    
    section ä¸­ä¼˜å…ˆçº§
    FAISSç´¢å¼•ä¼˜åŒ–       :b1, after a3, 14d
    PDFé¡µé¢ç¼“å­˜         :b2, after b1, 5d
    å¼‚æ­¥APIè°ƒç”¨         :b3, after b2, 14d
    Webå¯åŠ¨ä¼˜åŒ–         :b4, after b3, 5d
    
    section ä½ä¼˜å…ˆçº§
    Bboxç®—æ³•ä¼˜åŒ–        :c1, after b4, 21d
    GPUåŠ é€Ÿ            :c2, after c1, 14d
    æ··åˆæ£€ç´¢å¹¶è¡Œ        :c3, after c2, 5d
    æ–‡ä»¶I/Oä¼˜åŒ–         :c4, after c3, 7d
        </div>

        <h3>5.1 å®æ–½ç­–ç•¥</h3>
        <div class="info">
            <h4>ğŸ“… åˆ†é˜¶æ®µå®æ–½ï¼š</h4>
            <ol>
                <li><strong>ç¬¬ä¸€é˜¶æ®µï¼ˆ1-2å‘¨ï¼‰</strong>ï¼šå®æ–½é«˜ä¼˜å…ˆçº§ä¼˜åŒ–
                    <ul>
                        <li>ä¼˜åŒ–LLMé‡æ’åºè¿‡ç¨‹</li>
                        <li>å®ç°æŸ¥è¯¢ç¼“å­˜æœºåˆ¶</li>
                        <li>å‡å°‘åˆå§‹æ£€ç´¢æ ·æœ¬é‡</li>
                    </ul>
                </li>
                <li><strong>ç¬¬äºŒé˜¶æ®µï¼ˆ2-3å‘¨ï¼‰</strong>ï¼šå®æ–½ä¸­ä¼˜å…ˆçº§ä¼˜åŒ–
                    <ul>
                        <li>ä¼˜åŒ–FAISSç´¢å¼•å’Œé¢„åŠ è½½</li>
                        <li>PDFé¡µé¢ç¼“å­˜</li>
                        <li>Webç•Œé¢å¯åŠ¨ä¼˜åŒ–</li>
                    </ul>
                </li>
                <li><strong>ç¬¬ä¸‰é˜¶æ®µï¼ˆ3-4å‘¨ï¼‰</strong>ï¼šå®æ–½ä½ä¼˜å…ˆçº§ä¼˜åŒ–
                    <ul>
                        <li>ä¼˜åŒ–bboxåŒ¹é…ç®—æ³•</li>
                        <li>ä½¿ç”¨GPUåŠ é€Ÿ</li>
                        <li>æ··åˆæ£€ç´¢å¹¶è¡ŒåŒ–</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h3>5.2 æ€§èƒ½ç›‘æ§</h3>
        <div class="info">
            <h4>ğŸ“Š å»ºç«‹æ€§èƒ½ç›‘æ§æœºåˆ¶ï¼š</h4>
            <ul>
                <li>è®°å½•æ¯ä¸ªæŸ¥è¯¢çš„å“åº”æ—¶é—´</li>
                <li>ç›‘æ§å„ä¸ªç»„ä»¶çš„è€—æ—¶åˆ†å¸ƒ</li>
                <li>è·Ÿè¸ªç¼“å­˜å‘½ä¸­ç‡</li>
                <li>è®°å½•APIè°ƒç”¨æ¬¡æ•°å’Œå»¶è¿Ÿ</li>
                <li>å®šæœŸè¿›è¡Œæ€§èƒ½æµ‹è¯•å’Œä¼˜åŒ–</li>
            </ul>
        </div>

        <div class="mermaid">
graph LR
    A[æ€§èƒ½ç›‘æ§] --> B[å“åº”æ—¶é—´]
    A --> C[è€—æ—¶åˆ†å¸ƒ]
    A --> D[ç¼“å­˜å‘½ä¸­ç‡]
    A --> E[APIè°ƒç”¨]
    A --> F[å®šæœŸæµ‹è¯•]
    
    B --> B1[è®°å½•æ¯ä¸ªæŸ¥è¯¢]
    C --> C1[ç»„ä»¶è€—æ—¶åˆ†æ]
    D --> D1[ç¼“å­˜æ•ˆç‡]
    E --> E1[è°ƒç”¨æ¬¡æ•°/å»¶è¿Ÿ]
    F --> F1[æ€§èƒ½åŸºå‡†æµ‹è¯•]
    
    style A fill:#667eea
    style B fill:#764ba2
    style C fill:#f39c12
    style D fill:#e74c3c
    style E fill:#27ae60
    style F fill:#16a085
        </div>

        <h3>5.3 æµ‹è¯•å»ºè®®</h3>
        <div class="info">
            <h4>ğŸ§ª æ€§èƒ½æµ‹è¯•æ–¹æ³•ï¼š</h4>
            <ul>
                <li>ä½¿ç”¨ç›¸åŒçš„æµ‹è¯•æ•°æ®é›†è¿›è¡Œå‰åå¯¹æ¯”</li>
                <li>æµ‹è¯•ä¸åŒæŸ¥è¯¢ç±»å‹çš„æ€§èƒ½è¡¨ç°</li>
                <li>æ¨¡æ‹Ÿå¹¶å‘ç”¨æˆ·åœºæ™¯</li>
                <li>æµ‹è¯•ç¼“å­˜æ•ˆæœ</li>
                <li>è®°å½•ä¼˜åŒ–å‰åçš„æ€§èƒ½æŒ‡æ ‡</li>
            </ul>
        </div>

        <h3>5.4 æ³¨æ„äº‹é¡¹</h3>
        <div class="warning">
            <h4>âš ï¸ å®æ–½è¿‡ç¨‹ä¸­çš„æ³¨æ„äº‹é¡¹ï¼š</h4>
            <ul>
                <li>æ¯æ¬¡åªå®æ–½ä¸€ä¸ªä¼˜åŒ–ï¼Œé¿å…åŒæ—¶ä¿®æ”¹å¤šä¸ªåŠŸèƒ½</li>
                <li>åœ¨å®æ–½å‰å¤‡ä»½ä»£ç å’Œæ•°æ®</li>
                <li>åœ¨æµ‹è¯•ç¯å¢ƒå……åˆ†æµ‹è¯•åå†éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</li>
                <li>æ³¨æ„APIçš„QPSé™åˆ¶ï¼Œé¿å…è¶…é™</li>
                <li>ç›‘æ§ä¼˜åŒ–æ•ˆæœï¼ŒåŠæ—¶è°ƒæ•´ç­–ç•¥</li>
                <li>ä¿æŒä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯è¯»æ€§</li>
            </ul>
        </div>

        <h3>5.5 é¢„æœŸæ€»ä½“æ•ˆæœ</h3>
        <div class="table-container">
            <table>
                <tr>
                    <th>æ€§èƒ½æŒ‡æ ‡</th>
                    <th>ä¼˜åŒ–å‰</th>
                    <th>ä¼˜åŒ–åï¼ˆé¢„æœŸï¼‰</th>
                    <th>æå‡å¹…åº¦</th>
                </tr>
                <tr>
                    <td>Webç•Œé¢å¯åŠ¨æ—¶é—´</td>
                    <td>10-20ç§’</td>
                    <td>3-5ç§’</td>
                    <td>3-4å€</td>
                </tr>
                <tr>
                    <td>é¦–æ¬¡æŸ¥è¯¢å“åº”æ—¶é—´</td>
                    <td>30-60ç§’</td>
                    <td>5-10ç§’</td>
                    <td>5-6å€</td>
                </tr>
                <tr>
                    <td>é‡å¤æŸ¥è¯¢å“åº”æ—¶é—´</td>
                    <td>30-60ç§’</td>
                    <td>1-2ç§’</td>
                    <td>30-60å€</td>
                </tr>
                <tr>
                    <td>PDFé¡µé¢æ˜¾ç¤ºæ—¶é—´</td>
                    <td>2-5ç§’</td>
                    <td>0.5-1ç§’</td>
                    <td>4-5å€</td>
                </tr>
                <tr>
                    <td>å¹¶å‘æŸ¥è¯¢å¤„ç†èƒ½åŠ›</td>
                    <td>1-2 QPS</td>
                    <td>5-10 QPS</td>
                    <td>5å€</td>
                </tr>
            </table>
        </div>

        <div class="mermaid">
graph LR
    A[ä¼˜åŒ–å‰] --> B[ä¼˜åŒ–å]
    
    A1[å¯åŠ¨: 10-20s] --> B1[å¯åŠ¨: 3-5s]
    A2[é¦–æ¬¡æŸ¥è¯¢: 30-60s] --> B2[é¦–æ¬¡æŸ¥è¯¢: 5-10s]
    A3[é‡å¤æŸ¥è¯¢: 30-60s] --> B3[é‡å¤æŸ¥è¯¢: 1-2s]
    A4[PDFæ˜¾ç¤º: 2-5s] --> B4[PDFæ˜¾ç¤º: 0.5-1s]
    A5[å¹¶å‘: 1-2 QPS] --> B5[å¹¶å‘: 5-10 QPS]
    
    style A fill:#e74c3c
    style B fill:#27ae60
    style A1 fill:#c0392b
    style B1 fill:#2ecc71
    style A2 fill:#c0392b
    style B2 fill:#2ecc71
    style A3 fill:#c0392b
    style B3 fill:#2ecc71
    style A4 fill:#c0392b
    style B4 fill:#2ecc71
    style A5 fill:#c0392b
    style B5 fill:#2ecc71
        </div>

        <div class="footer">
            <p>ğŸ“„ æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2026-01-04</p>
            <p>ğŸ”¢ ç‰ˆæœ¬ï¼š2.0</p>
            <p>ğŸ“§ å¦‚æœ‰ç–‘é—®æˆ–å»ºè®®ï¼Œè¯·è”ç³»æŠ€æœ¯å›¢é˜Ÿ</p>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            },
            gantt: {
                titleTopMargin: 25,
                barHeight: 20,
                barGap: 4,
                topPadding: 50,
                sidePadding: 100
            }
        });
    </script>
</body>
</html>