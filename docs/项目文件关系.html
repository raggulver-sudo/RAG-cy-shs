<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAGé¡¹ç›®æ¶æ„ - æ–‡ä»¶è°ƒç”¨å…³ç³»</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        .section-title {
            font-size: 1.8em;
            color: #667eea;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .diagram-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .file-card {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #667eea;
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .file-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .file-card h3 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.3em;
        }

        .file-card p {
            color: #555;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .file-card .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 10px;
        }

        .tag {
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
        }

        .subsystem {
            background: #e8f4f8;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            border-left: 5px solid #17a2b8;
        }

        .subsystem h3 {
            color: #17a2b8;
            margin-bottom: 15px;
        }

        .call-list {
            list-style: none;
            padding: 0;
        }

        .call-list li {
            padding: 10px;
            margin: 5px 0;
            background: white;
            border-radius: 5px;
            border-left: 3px solid #17a2b8;
        }

        .arrow {
            color: #667eea;
            font-weight: bold;
            margin: 0 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
        }

        tr:hover {
            background: #f5f5f5;
        }

        .legend {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .legend h3 {
            color: #667eea;
            margin-bottom: 15px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 10px 0;
        }

        .legend-color {
            width: 30px;
            height: 30px;
            border-radius: 5px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ—ï¸ RAGé¡¹ç›®æ¶æ„ - æ–‡ä»¶è°ƒç”¨å…³ç³»</h1>
            <p>ä¼ä¸šçŸ¥è¯†åº“RAGç³»ç»Ÿ - å®Œæ•´çš„æ–‡ä»¶è°ƒç”¨å…³ç³»å›¾</p>
        </div>

        <div class="content">
            <!-- ç³»ç»Ÿæ€»è§ˆ -->
            <div class="section">
                <h2 class="section-title">ğŸ“Š ç³»ç»Ÿæ€»è§ˆ</h2>
                <div class="diagram-container">
                    <div class="mermaid">
graph TB
    A[ç”¨æˆ·å…¥å£] --> B[main.py<br/>å‘½ä»¤è¡Œå·¥å…·]
    A --> C[app_streamlit.py<br/>Webç•Œé¢]
    A --> D[pipeline.py<br/>ä¸»æµç¨‹ç¼–æ’]
    
    B --> D
    C --> D
    
    D --> E[PDFå¤„ç†å­ç³»ç»Ÿ]
    D --> F[æ–‡æœ¬å¤„ç†å­ç³»ç»Ÿ]
    D --> G[å‘é‡åŒ–å’Œæ£€ç´¢å­ç³»ç»Ÿ]
    D --> H[é—®é¢˜å¤„ç†å­ç³»ç»Ÿ]
    
    E --> E1[pdf_parsing.py]
    E --> E2[parsed_reports_merging.py]
    E --> E3[pdf_mineru.py]
    
    F --> F1[text_splitter.py]
    F --> F2[tables_serialization.py]
    F --> F3[parsed_reports_merging.py]
    
    G --> G1[ingestion.py]
    G --> G2[retrieval.py]
    G --> G3[reranking.py]
    
    H --> H1[questions_processing.py]
    H --> H2[api_requests.py]
    H --> H3[api_request_parallel_processor.py]
    H --> H4[prompts.py]
    
    style A fill:#f9f,stroke:#333,stroke-width:2px
    style B fill:#bbf,stroke:#333,stroke-width:2px
    style C fill:#bbf,stroke:#333,stroke-width:2px
    style D fill:#bfb,stroke:#333,stroke-width:2px
    style E fill:#fbf,stroke:#333,stroke-width:2px
    style F fill:#fbf,stroke:#333,stroke-width:2px
    style G fill:#fbf,stroke:#333,stroke-width:2px
    style H fill:#fbf,stroke:#333,stroke-width:2px
                    </div>
                </div>
            </div>

            <!-- è¯¦ç»†è°ƒç”¨å…³ç³» -->
            <div class="section">
                <h2 class="section-title">ğŸ”— è¯¦ç»†è°ƒç”¨å…³ç³»</h2>
                <div class="diagram-container">
                    <div class="mermaid">
graph TB
    subgraph å…¥å£å±‚
        M[main.py]
        S[app_streamlit.py]
    end
    
    subgraph ä¸»æµç¨‹å±‚
        P[pipeline.py]
    end
    
    subgraph PDFå¤„ç†å±‚
        PP[pdf_parsing.py]
        PRM[parsed_reports_merging.py]
        PM[pdf_mineru.py]
    end
    
    subgraph æ–‡æœ¬å¤„ç†å±‚
        TS[text_splitter.py]
        TBS[tables_serialization.py]
        PRM2[parsed_reports_merging.py]
    end
    
    subgraph å‘é‡åŒ–æ£€ç´¢å±‚
        ING[ingestion.py]
        RET[retrieval.py]
        RER[reranking.py]
    end
    
    subgraph é—®é¢˜å¤„ç†å±‚
        QP[questions_processing.py]
        AR[api_requests.py]
        ARP[api_request_parallel_processor.py]
        PRO[prompts.py]
    end
    
    M -->|è°ƒç”¨| P
    S -->|è°ƒç”¨| P
    
    P -->|parse_pdf_reports| PP
    P -->|serialize_tables| TBS
    P -->|process_parsed_reports| PRM
    P -->|export_reports_to_markdown| PM
    P -->|chunk_reports| TS
    P -->|create_vector_dbs| ING
    P -->|process_questions| QP
    
    PP -->|ä½¿ç”¨| PRM
    PRM -->|ä½¿ç”¨| PRM2
    
    TS -->|ä½¿ç”¨| TBS
    
    QP -->|ä½¿ç”¨| RET
    QP -->|ä½¿ç”¨| RER
    QP -->|ä½¿ç”¨| AR
    QP -->|ä½¿ç”¨| ARP
    QP -->|ä½¿ç”¨| PRO
    
    RET -->|ä½¿ç”¨| RER
    
    AR -->|ä½¿ç”¨| ARP
    
    style M fill:#e1f5fe,stroke:#0288d1,stroke-width:2px
    style S fill:#e1f5fe,stroke:#0288d1,stroke-width:2px
    style P fill:#fff3e0,stroke:#f57c00,stroke-width:3px
    style PP fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style PRM fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style PM fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    style TS fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    style TBS fill:#e8f5e9,stroke:#388e3c,stroke-width:2px
    style ING fill:#fff8e1,stroke:#fbc02d,stroke-width:2px
    style RET fill:#fff8e1,stroke:#fbc02d,stroke-width:2px
    style RER fill:#fff8e1,stroke:#fbc02d,stroke-width:2px
    style QP fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    style AR fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    style ARP fill:#fce4ec,stroke:#c2185b,stroke-width:2px
    style PRO fill:#fce4ec,stroke:#c2185b,stroke-width:2px
                    </div>
                </div>
            </div>

            <!-- å­ç³»ç»Ÿè¯¦è§£ -->
            <div class="section">
                <h2 class="section-title">ğŸ“¦ å­ç³»ç»Ÿè¯¦è§£</h2>

                <!-- PDFå¤„ç†å­ç³»ç»Ÿ -->
                <div class="subsystem">
                    <h3>1. PDFå¤„ç†å­ç³»ç»Ÿ</h3>
                    <p>è´Ÿè´£PDFæ–‡ä»¶çš„è§£æã€è½¬æ¢å’Œåˆæ­¥å¤„ç†</p>
                    <ul class="call-list">
                        <li><strong>pdf_parsing.py</strong> - ä½¿ç”¨Doclingåº“è§£æPDFï¼Œæå–æ–‡æœ¬ã€è¡¨æ ¼ã€å›¾ç‰‡ç­‰å†…å®¹</li>
                        <li><strong>parsed_reports_merging.py</strong> - åˆå¹¶è§£æåçš„æŠ¥å‘Šç»„ä»¶ï¼Œç”Ÿæˆç»“æ„åŒ–JSON</li>
                        <li><strong>pdf_mineru.py</strong> - ä½¿ç”¨MinerU APIå°†PDFè½¬æ¢ä¸ºMarkdownæ ¼å¼</li>
                    </ul>
                    <div class="diagram-container">
                        <div class="mermaid">
graph LR
    A[PDFæ–‡ä»¶] --> B[pdf_parsing.py]
    B --> C[æå–æ–‡æœ¬/è¡¨æ ¼/å›¾ç‰‡]
    C --> D[parsed_reports_merging.py]
    D --> E[ç»“æ„åŒ–JSON]
    
    A --> F[pdf_mineru.py]
    F --> G[Markdownæ–‡ä»¶]
    
    style A fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    style B fill:#bbdefb,stroke:#1976d2,stroke-width:2px
    style C fill:#bbdefb,stroke:#1976d2,stroke-width:2px
    style D fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    style E fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    style F fill:#ffe0b2,stroke:#f57c00,stroke-width:2px
    style G fill:#ffe0b2,stroke:#f57c00,stroke-width:2px
                        </div>
                    </div>
                </div>

                <!-- æ–‡æœ¬å¤„ç†å­ç³»ç»Ÿ -->
                <div class="subsystem">
                    <h3>2. æ–‡æœ¬å¤„ç†å­ç³»ç»Ÿ</h3>
                    <p>è´Ÿè´£æ–‡æœ¬åˆ†å—ã€è¡¨æ ¼åºåˆ—åŒ–å’ŒæŠ¥å‘Šè§„æ•´</p>
                    <ul class="call-list">
                        <li><strong>text_splitter.py</strong> - å°†Markdownæ–‡ä»¶æŒ‰é¡µåˆ†å—ï¼Œæ”¯æŒè¡¨æ ¼æ’å…¥</li>
                        <li><strong>tables_serialization.py</strong> - ä½¿ç”¨LLMå¯¹è¡¨æ ¼è¿›è¡Œåºåˆ—åŒ–ï¼Œæå–ç»“æ„åŒ–ä¿¡æ¯</li>
                        <li><strong>parsed_reports_merging.py</strong> - è§„æ•´æŠ¥å‘Šæ–‡æœ¬ï¼Œæ¸…æ´—æ ¼å¼</li>
                    </ul>
                    <div class="diagram-container">
                        <div class="mermaid">
graph LR
    A[Markdownæ–‡ä»¶] --> B[text_splitter.py]
    B --> C[æŒ‰é¡µåˆ†å—]
    C --> D[æ’å…¥åºåˆ—åŒ–è¡¨æ ¼]
    D --> E[åˆ†å—JSON]
    
    F[è¡¨æ ¼HTML] --> G[tables_serialization.py]
    G --> H[LLMåºåˆ—åŒ–]
    H --> I[ç»“æ„åŒ–è¡¨æ ¼ä¿¡æ¯]
    I --> D
    
    style A fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px
    style B fill:#c5cae9,stroke:#3f51b5,stroke-width:2px
    style C fill:#c5cae9,stroke:#3f51b5,stroke-width:2px
    style D fill:#c5cae9,stroke:#3f51b5,stroke-width:2px
    style E fill:#c5cae9,stroke:#3f51b5,stroke-width:2px
    style F fill:#ffccbc,stroke:#e64a19,stroke-width:2px
    style G fill:#ffccbc,stroke:#e64a19,stroke-width:2px
    style H fill:#ffccbc,stroke:#e64a19,stroke-width:2px
    style I fill:#ffccbc,stroke:#e64a19,stroke-width:2px
                        </div>
                    </div>
                </div>

                <!-- å‘é‡åŒ–æ£€ç´¢å­ç³»ç»Ÿ -->
                <div class="subsystem">
                    <h3>3. å‘é‡åŒ–æ£€ç´¢å­ç³»ç»Ÿ</h3>
                    <p>è´Ÿè´£å‘é‡æ•°æ®åº“åˆ›å»ºã€æ£€ç´¢å’Œé‡æ’</p>
                    <ul class="call-list">
                        <li><strong>ingestion.py</strong> - ä»åˆ†å—æŠ¥å‘Šåˆ›å»ºFAISSå‘é‡æ•°æ®åº“</li>
                        <li><strong>retrieval.py</strong> - å®ç°å‘é‡æ£€ç´¢ã€BM25æ£€ç´¢å’Œæ··åˆæ£€ç´¢</li>
                        <li><strong>reranking.py</strong> - ä½¿ç”¨Jina APIæˆ–LLMå¯¹æ£€ç´¢ç»“æœè¿›è¡Œé‡æ’</li>
                    </ul>
                    <div class="diagram-container">
                        <div class="mermaid">
graph LR
    A[åˆ†å—JSON] --> B[ingestion.py]
    B --> C[æ–‡æœ¬åµŒå…¥]
    C --> D[FAISSå‘é‡åº“]
    
    E[ç”¨æˆ·é—®é¢˜] --> F[retrieval.py]
    F --> G[å‘é‡æ£€ç´¢]
    F --> H[BM25æ£€ç´¢]
    G --> I[æ··åˆæ£€ç´¢ç»“æœ]
    H --> I
    I --> J[reranking.py]
    J --> K[é‡æ’ç»“æœ]
    
    style A fill:#b3e5fc,stroke:#0288d1,stroke-width:2px
    style B fill:#b3e5fc,stroke:#0288d1,stroke-width:2px
    style C fill:#b3e5fc,stroke:#0288d1,stroke-width:2px
    style D fill:#b3e5fc,stroke:#0288d1,stroke-width:2px
    style E fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style F fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style G fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style H fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style I fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style J fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style K fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
                        </div>
                    </div>
                </div>

                <!-- é—®é¢˜å¤„ç†å­ç³»ç»Ÿ -->
                <div class="subsystem">
                    <h3>4. é—®é¢˜å¤„ç†å­ç³»ç»Ÿ</h3>
                    <p>è´Ÿè´£é—®é¢˜å¤„ç†ã€ç­”æ¡ˆç”Ÿæˆå’ŒAPIè°ƒç”¨</p>
                    <ul class="call-list">
                        <li><strong>questions_processing.py</strong> - å¤„ç†é—®é¢˜ï¼Œæ£€ç´¢ä¸Šä¸‹æ–‡ï¼Œç”Ÿæˆç­”æ¡ˆ</li>
                        <li><strong>api_requests.py</strong> - å°è£…å¤šä¸ªLLMæä¾›å•†çš„APIè°ƒç”¨</li>
                        <li><strong>api_request_parallel_processor.py</strong> - å¹¶å‘å¤„ç†APIè¯·æ±‚ï¼Œé™æµæ§åˆ¶</li>
                        <li><strong>prompts.py</strong> - å®šä¹‰æ‰€æœ‰æç¤ºè¯æ¨¡æ¿å’Œç­”æ¡ˆschema</li>
                    </ul>
                    <div class="diagram-container">
                        <div class="mermaid">
graph LR
    A[ç”¨æˆ·é—®é¢˜] --> B[questions_processing.py]
    B --> C[æ£€ç´¢ä¸Šä¸‹æ–‡]
    C --> D[api_requests.py]
    D --> E[LLMç”Ÿæˆç­”æ¡ˆ]
    E --> F[ç»“æ„åŒ–ç­”æ¡ˆ]
    
    D --> G[api_request_parallel_processor.py]
    G --> H[å¹¶å‘è¯·æ±‚]
    
    B --> I[prompts.py]
    I --> J[æç¤ºè¯æ¨¡æ¿]
    J --> D
    
    style A fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
    style B fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
    style C fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
    style D fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
    style E fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
    style F fill:#f8bbd0,stroke:#c2185b,stroke-width:2px
    style G fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px
    style H fill:#e1bee7,stroke:#7b1fa2,stroke-width:2px
    style I fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
    style J fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
                        </div>
                    </div>
                </div>
            </div>

            <!-- æ–‡ä»¶åŠŸèƒ½è¡¨ -->
            <div class="section">
                <h2 class="section-title">ğŸ“‹ æ–‡ä»¶åŠŸèƒ½è¡¨</h2>
                <table>
                    <thead>
                        <tr>
                            <th>æ–‡ä»¶å</th>
                            <th>åŠŸèƒ½æè¿°</th>
                            <th>æ‰€å±å­ç³»ç»Ÿ</th>
                            <th>ä¸»è¦ç±»/å‡½æ•°</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>pipeline.py</strong></td>
                            <td>ä¸»æµç¨‹ç¼–æ’ï¼Œåè°ƒå„ä¸ªå­ç³»ç»Ÿ</td>
                            <td>ä¸»æµç¨‹å±‚</td>
                            <td>Pipeline</td>
                        </tr>
                        <tr>
                            <td><strong>main.py</strong></td>
                            <td>å‘½ä»¤è¡Œå·¥å…·å…¥å£</td>
                            <td>å…¥å£å±‚</td>
                            <td>cli</td>
                        </tr>
                        <tr>
                            <td><strong>app_streamlit.py</strong></td>
                            <td>Streamlit Webç•Œé¢</td>
                            <td>å…¥å£å±‚</td>
                            <td>Streamlit</td>
                        </tr>
                        <tr>
                            <td><strong>pdf_parsing.py</strong></td>
                            <td>PDFè§£æï¼Œæå–æ–‡æœ¬/è¡¨æ ¼/å›¾ç‰‡</td>
                            <td>PDFå¤„ç†</td>
                            <td>PDFParser, JsonReportProcessor</td>
                        </tr>
                        <tr>
                            <td><strong>parsed_reports_merging.py</strong></td>
                            <td>åˆå¹¶è§£æåçš„æŠ¥å‘Šç»„ä»¶</td>
                            <td>PDFå¤„ç†/æ–‡æœ¬å¤„ç†</td>
                            <td>PageTextPreparation</td>
                        </tr>
                        <tr>
                            <td><strong>pdf_mineru.py</strong></td>
                            <td>ä½¿ç”¨MinerU APIè½¬æ¢PDFä¸ºMarkdown</td>
                            <td>PDFå¤„ç†</td>
                            <td>get_task_id, get_result</td>
                        </tr>
                        <tr>
                            <td><strong>text_splitter.py</strong></td>
                            <td>æ–‡æœ¬åˆ†å—ï¼Œæ”¯æŒè¡¨æ ¼æ’å…¥</td>
                            <td>æ–‡æœ¬å¤„ç†</td>
                            <td>TextSplitter</td>
                        </tr>
                        <tr>
                            <td><strong>tables_serialization.py</strong></td>
                            <td>ä½¿ç”¨LLMåºåˆ—åŒ–è¡¨æ ¼</td>
                            <td>æ–‡æœ¬å¤„ç†</td>
                            <td>TableSerializer</td>
                        </tr>
                        <tr>
                            <td><strong>ingestion.py</strong></td>
                            <td>åˆ›å»ºFAISSå‘é‡æ•°æ®åº“</td>
                            <td>å‘é‡åŒ–æ£€ç´¢</td>
                            <td>VectorDBIngestor</td>
                        </tr>
                        <tr>
                            <td><strong>retrieval.py</strong></td>
                            <td>å‘é‡æ£€ç´¢ã€BM25æ£€ç´¢ã€æ··åˆæ£€ç´¢</td>
                            <td>å‘é‡åŒ–æ£€ç´¢</td>
                            <td>VectorRetriever, HybridRetriever</td>
                        </tr>
                        <tr>
                            <td><strong>reranking.py</strong></td>
                            <td>ä½¿ç”¨Jina APIæˆ–LLMé‡æ’ç»“æœ</td>
                            <td>å‘é‡åŒ–æ£€ç´¢</td>
                            <td>JinaReranker, LLMReranker</td>
                        </tr>
                        <tr>
                            <td><strong>questions_processing.py</strong></td>
                            <td>å¤„ç†é—®é¢˜ï¼Œç”Ÿæˆç­”æ¡ˆ</td>
                            <td>é—®é¢˜å¤„ç†</td>
                            <td>QuestionsProcessor</td>
                        </tr>
                        <tr>
                            <td><strong>api_requests.py</strong></td>
                            <td>å°è£…å¤šä¸ªLLMæä¾›å•†çš„API</td>
                            <td>é—®é¢˜å¤„ç†</td>
                            <td>APIProcessor</td>
                        </tr>
                        <tr>
                            <td><strong>api_request_parallel_processor.py</strong></td>
                            <td>å¹¶å‘å¤„ç†APIè¯·æ±‚ï¼Œé™æµæ§åˆ¶</td>
                            <td>é—®é¢˜å¤„ç†</td>
                            <td>process_api_requests_from_file</td>
                        </tr>
                        <tr>
                            <td><strong>prompts.py</strong></td>
                            <td>å®šä¹‰æç¤ºè¯æ¨¡æ¿å’Œç­”æ¡ˆschema</td>
                            <td>é—®é¢˜å¤„ç†</td>
                            <td>AnswerWithRAGContextNumberPrompt, RerankingPrompt</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- æ•°æ®æµå‘ -->
            <div class="section">
                <h2 class="section-title">ğŸŒŠ æ•°æ®æµå‘</h2>
                <div class="diagram-container">
                    <div class="mermaid">
graph TD
    A[PDFæ–‡ä»¶] --> B[pdf_parsing.py]
    B --> C[ç»“æ„åŒ–JSON]
    C --> D[parsed_reports_merging.py]
    D --> E[è§„æ•´JSON]
    E --> F[pdf_mineru.py]
    F --> G[Markdownæ–‡ä»¶]
    G --> H[text_splitter.py]
    H --> I[åˆ†å—JSON]
    I --> J[ingestion.py]
    J --> K[FAISSå‘é‡åº“]
    
    L[ç”¨æˆ·é—®é¢˜] --> M[questions_processing.py]
    M --> N[retrieval.py]
    N --> K
    K --> O[æ£€ç´¢ç»“æœ]
    O --> P[reranking.py]
    P --> Q[é‡æ’ç»“æœ]
    Q --> M
    M --> R[api_requests.py]
    R --> S[LLMç­”æ¡ˆ]
    S --> T[ç»“æ„åŒ–ç­”æ¡ˆ]
    
    style A fill:#ffcdd2,stroke:#c62828,stroke-width:2px
    style K fill:#fff9c4,stroke:#fbc02d,stroke-width:2px
    style T fill:#c8e6c9,stroke:#388e3c,stroke-width:2px
                    </div>
                </div>
            </div>

            <!-- å…¶ä»–æ–‡ä»¶ -->
            <div class="section">
                <h2 class="section-title">ğŸ“ å…¶ä»–æ–‡ä»¶</h2>
                <div class="file-grid">
                    <div class="file-card">
                        <h3>scripts/1-æƒ…æ„Ÿåˆ†æ-Qwen.py</h3>
                        <p>ä½¿ç”¨Qwenæ¨¡å‹è¿›è¡Œæƒ…æ„Ÿåˆ†æçš„ç¤ºä¾‹è„šæœ¬</p>
                        <div class="tags">
                            <span class="tag">ç¤ºä¾‹</span>
                            <span class="tag">æƒ…æ„Ÿåˆ†æ</span>
                        </div>
                    </div>
                    <div class="file-card">
                        <h3>scripts/dashscope-embedding-1.py</h3>
                        <p>ä½¿ç”¨DashScope APIè¿›è¡Œæ–‡æœ¬åµŒå…¥çš„ç¤ºä¾‹è„šæœ¬</p>
                        <div class="tags">
                            <span class="tag">ç¤ºä¾‹</span>
                            <span class="tag">åµŒå…¥</span>
                        </div>
                    </div>
                    <div class="file-card">
                        <h3>setup.py</h3>
                        <p>é¡¹ç›®å®‰è£…é…ç½®æ–‡ä»¶</p>
                        <div class="tags">
                            <span class="tag">é…ç½®</span>
                            <span class="tag">å®‰è£…</span>
                        </div>
                    </div>
                    <div class="file-card">
                        <h3>src/__init__.py</h3>
                        <p>PythonåŒ…åˆå§‹åŒ–æ–‡ä»¶</p>
                        <div class="tags">
                            <span class="tag">åŒ…</span>
                            <span class="tag">åˆå§‹åŒ–</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å›¾ä¾‹ -->
            <div class="section">
                <h2 class="section-title">ğŸ¨ å›¾ä¾‹</h2>
                <div class="legend">
                    <h3>æ–‡ä»¶é¢œè‰²è¯´æ˜</h3>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e1f5fe; border: 2px solid #0288d1;"></div>
                        <span>å…¥å£å±‚æ–‡ä»¶ï¼ˆmain.py, app_streamlit.pyï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fff3e0; border: 2px solid #f57c00;"></div>
                        <span>ä¸»æµç¨‹å±‚æ–‡ä»¶ï¼ˆpipeline.pyï¼‰</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f3e5f5; border: 2px solid #7b1fa2;"></div>
                        <span>PDFå¤„ç†å±‚æ–‡ä»¶</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e8f5e9; border: 2px solid #388e3c;"></div>
                        <span>æ–‡æœ¬å¤„ç†å±‚æ–‡ä»¶</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fff8e1; border: 2px solid #fbc02d;"></div>
                        <span>å‘é‡åŒ–æ£€ç´¢å±‚æ–‡ä»¶</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #fce4ec; border: 2px solid #c2185b;"></div>
                        <span>é—®é¢˜å¤„ç†å±‚æ–‡ä»¶</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
    </script>
</body>
</html>
